/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/articles/route";
exports.ids = ["app/api/articles/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Farticles%2Froute&page=%2Fapi%2Farticles%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Farticles%2Froute.ts&appDir=%2FUsers%2Fmarkau%2Fpanora8A%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmarkau%2Fpanora8A&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Farticles%2Froute&page=%2Fapi%2Farticles%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Farticles%2Froute.ts&appDir=%2FUsers%2Fmarkau%2Fpanora8A%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmarkau%2Fpanora8A&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_markau_panora8A_app_api_articles_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/articles/route.ts */ \"(rsc)/./app/api/articles/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/articles/route\",\n        pathname: \"/api/articles\",\n        filename: \"route\",\n        bundlePath: \"app/api/articles/route\"\n    },\n    resolvedPagePath: \"/Users/markau/panora8A/app/api/articles/route.ts\",\n    nextConfigOutput,\n    userland: _Users_markau_panora8A_app_api_articles_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/articles/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhcnRpY2xlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYXJ0aWNsZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhcnRpY2xlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hcmthdSUyRnBhbm9yYThBJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRm1hcmthdSUyRnBhbm9yYThBJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNBO0FBQzdFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGtpLXpvbmUvPzRmYTMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL21hcmthdS9wYW5vcmE4QS9hcHAvYXBpL2FydGljbGVzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hcnRpY2xlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FydGljbGVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hcnRpY2xlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9tYXJrYXUvcGFub3JhOEEvYXBwL2FwaS9hcnRpY2xlcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXJ0aWNsZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Farticles%2Froute&page=%2Fapi%2Farticles%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Farticles%2Froute.ts&appDir=%2FUsers%2Fmarkau%2Fpanora8A%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmarkau%2Fpanora8A&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/articles/route.ts":
/*!***********************************!*\
  !*** ./app/api/articles/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.ts\");\n\n\nconst dynamic = \"force-dynamic\";\n// Mock data as fallback\nconst mockArticles = [\n    {\n        id: \"1\",\n        title: \"AI Revolution: How Machine Learning is Transforming Healthcare\",\n        summary: \"Artificial intelligence is revolutionizing healthcare with breakthrough applications in diagnosis, treatment planning, and drug discovery. Recent studies show AI can detect diseases earlier than traditional methods.\",\n        content: \"The healthcare industry is experiencing a paradigm shift as artificial intelligence technologies become increasingly sophisticated and accessible...\",\n        url: \"https://example.com/ai-healthcare\",\n        source: \"TechHealth Today\",\n        publishedAt: \"2024-01-15T10:30:00Z\",\n        imageUrl: \"/placeholder.svg?height=200&width=300\",\n        category: \"Technology\",\n        readTime: 5\n    },\n    {\n        id: \"2\",\n        title: \"Climate Change: New Carbon Capture Technology Shows Promise\",\n        summary: \"Scientists have developed a revolutionary carbon capture system that could remove millions of tons of CO2 from the atmosphere annually. The technology uses advanced materials to trap carbon efficiently.\",\n        content: \"A breakthrough in carbon capture technology has emerged from research laboratories, offering new hope in the fight against climate change...\",\n        url: \"https://example.com/carbon-capture\",\n        source: \"Environmental Science Weekly\",\n        publishedAt: \"2024-01-14T14:20:00Z\",\n        imageUrl: \"/placeholder.svg?height=200&width=300\",\n        category: \"Science\",\n        readTime: 4\n    },\n    {\n        id: \"3\",\n        title: \"Cryptocurrency Market Sees Major Institutional Adoption\",\n        summary: \"Major financial institutions are increasingly adopting cryptocurrency solutions, with several banks announcing new digital asset services. This marks a significant shift in traditional finance.\",\n        content: \"The cryptocurrency landscape is evolving rapidly as traditional financial institutions embrace digital assets...\",\n        url: \"https://example.com/crypto-adoption\",\n        source: \"Financial Times\",\n        publishedAt: \"2024-01-13T09:15:00Z\",\n        imageUrl: \"/placeholder.svg?height=200&width=300\",\n        category: \"Finance\",\n        readTime: 3\n    },\n    // Mock car data\n    {\n        id: \"car-1\",\n        title: \"BMW X5 xDrive40i\",\n        summary: \"Luxury SUV with excellent condition, full service history, and premium features.\",\n        content: \"Make: BMW, Model: X5 xDrive40i, Year: 2022, Price: HK$850,000, Engine: 3.0L Turbo, Transmission: Automatic, Fuel: Petrol, Doors: 5, Color: Black, Mileage: 15,000 km\",\n        url: \"https://m.28car.com/sell_dsp.php?h_vid=example1\",\n        source: \"28car\",\n        publishedAt: \"2024-01-15T12:00:00Z\",\n        imageUrl: \"https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=800&h=400&fit=crop\",\n        images: [\n            \"https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=800&h=400&fit=crop\",\n            \"https://images.unsplash.com/photo-1555626906-fcf10d6851b4?w=800&h=400&fit=crop\",\n            \"https://images.unsplash.com/photo-1606664515524-ed2f786a0bd6?w=800&h=400&fit=crop\",\n            \"https://images.unsplash.com/photo-1606220945770-b5b6c2c55bf1?w=800&h=400&fit=crop\"\n        ],\n        category: \"cars\",\n        readTime: 2\n    },\n    {\n        id: \"car-2\",\n        title: \"Toyota ALPHARD 2.5 Z\",\n        summary: \"Premium MPV with luxury interior and advanced safety features.\",\n        content: \"Make: Toyota, Model: ALPHARD 2.5 Z, Year: 2023, Price: HK$588,000 Ê∏õÂÉπ [ÂéüÂÉπ$628,000], Engine: 2.5L Hybrid, Transmission: CVT, Fuel: Hybrid, Doors: 4, Color: White, Mileage: 8,000 km\",\n        url: \"https://m.28car.com/sell_dsp.php?h_vid=example2\",\n        source: \"28car\",\n        publishedAt: \"2024-01-15T11:30:00Z\",\n        imageUrl: \"https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=800&h=400&fit=crop\",\n        images: [\n            \"https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=800&h=400&fit=crop\",\n            \"https://images.unsplash.com/photo-1541899481282-d53bffe3c35d?w=800&h=400&fit=crop\",\n            \"https://images.unsplash.com/photo-1549521462-5c6b92d0ff9a?w=800&h=400&fit=crop\"\n        ],\n        category: \"cars\",\n        readTime: 2\n    },\n    {\n        id: \"car-3\",\n        title: \"Mercedes-Benz G300 CDI\",\n        summary: \"Iconic G-Class with robust performance and luxurious appointments.\",\n        content: \"Make: Mercedes-Benz, Model: G300 CDI, Year: 2021, Price: HK$419,000 Ê∏õÂÉπ [ÂéüÂÉπ$458,000], Engine: 3.0L Diesel, Transmission: Automatic, Fuel: Diesel, Doors: 5, Color: Silver, Mileage: 25,000 km\",\n        url: \"https://m.28car.com/sell_dsp.php?h_vid=example3\",\n        source: \"28car\",\n        publishedAt: \"2024-01-15T10:45:00Z\",\n        imageUrl: \"https://images.unsplash.com/photo-1563720223185-11003d516935?w=800&h=400&fit=crop\",\n        images: [\n            \"https://images.unsplash.com/photo-1563720223185-11003d516935?w=800&h=400&fit=crop\",\n            \"https://images.unsplash.com/photo-1618843479313-40f8afb4b4d8?w=800&h=400&fit=crop\",\n            \"https://images.unsplash.com/photo-1567818735868-e71b99932e29?w=800&h=400&fit=crop\",\n            \"https://images.unsplash.com/photo-1609521263047-f8f205293f24?w=800&h=400&fit=crop\",\n            \"https://images.unsplash.com/photo-1606611013016-969c19ba0d15?w=800&h=400&fit=crop\"\n        ],\n        category: \"cars\",\n        readTime: 2\n    }\n];\n// Add better logging and debugging for the articles API\nasync function GET(request) {\n    try {\n        const searchParams = request.nextUrl.searchParams;\n        const page = Number.parseInt(searchParams.get(\"page\") || \"0\");\n        const limit = 10;\n        const category = searchParams.get(\"category\") || null;\n        const enriched = searchParams.get(\"enriched\") // \"true\", \"false\", or null\n        ;\n        console.log(\"Articles API called, checking database setup...\");\n        if (category) {\n            console.log(`Category filter: ${category}`);\n        }\n        if (enriched !== null) {\n            console.log(`Enrichment filter: ${enriched}`);\n        }\n        // Check if database is set up with more detailed logging\n        const isDatabaseReady = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.checkDatabaseSetup)();\n        console.log(\"Database ready status:\", isDatabaseReady);\n        if (!isDatabaseReady) {\n            console.warn(\"Database not set up, using mock data\");\n            // Return mock data with pagination and category filtering\n            let filteredArticles = mockArticles;\n            if (category) {\n                filteredArticles = mockArticles.filter((article)=>article.category.toLowerCase() === category.toLowerCase());\n            }\n            // Apply enrichment filter to mock data\n            if (enriched === \"true\") {\n                filteredArticles = filteredArticles.filter((article)=>article.id === \"car-1\" // Mock: only car-1 is \"AI enhanced\"\n                );\n            } else if (enriched === \"false\") {\n                filteredArticles = filteredArticles.filter((article)=>article.id !== \"car-1\" // Mock: car-1 is AI enhanced, others are not\n                );\n            }\n            const startIndex = page * limit;\n            const endIndex = startIndex + limit;\n            const paginatedArticles = filteredArticles.slice(startIndex, endIndex);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                articles: paginatedArticles,\n                nextPage: endIndex < filteredArticles.length ? page + 1 : null,\n                usingMockData: true,\n                debug: \"Database setup check failed\"\n            });\n        }\n        console.log(\"Fetching articles from database...\");\n        const filters = {};\n        if (category) filters.category = category;\n        if (enriched === \"true\") filters.isAiEnhanced = true;\n        if (enriched === \"false\") filters.isAiEnhanced = false;\n        const articles = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.getArticles)(page, limit, filters);\n        console.log(`Fetched ${articles.length} articles from database`);\n        // If no articles in database, fall back to mock data\n        if (articles.length === 0 && page === 0) {\n            console.warn(\"No articles in database, using mock data\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                articles: mockArticles.slice(0, limit),\n                nextPage: null,\n                usingMockData: true,\n                debug: \"No articles found in database\"\n            });\n        }\n        // Transform to match frontend interface\n        const transformedArticles = articles.map((article)=>({\n                id: article.id,\n                title: article.title,\n                summary: article.summary,\n                ai_summary: article.ai_summary,\n                content: article.content,\n                url: article.url,\n                source: article.source,\n                publishedAt: article.published_at || article.created_at,\n                imageUrl: article.image_url || \"/placeholder.svg?height=200&width=300\",\n                category: article.category || \"General\",\n                readTime: Math.ceil((article.content?.length || 0) / 200) || 3,\n                isAiEnhanced: article.is_ai_enhanced || false,\n                originalArticleId: article.original_article_id,\n                enhancementMetadata: article.enhancement_metadata\n            }));\n        console.log(\"Returning real articles from database\");\n        // Better nextPage logic: check if we got the requested limit and try to peek ahead\n        let hasMore = false;\n        if (transformedArticles.length === limit) {\n            // Quick check: try to get one more article to see if there are more pages\n            const nextPageArticles = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.getArticles)(page + 1, 1, filters);\n            hasMore = nextPageArticles.length > 0;\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            articles: transformedArticles,\n            nextPage: hasMore ? page + 1 : null,\n            usingMockData: false,\n            debug: \"Using real database data\"\n        });\n    } catch (error) {\n        console.error(\"Error fetching articles:\", error);\n        // Return mock data as fallback\n        const searchParams = request.nextUrl.searchParams;\n        const page = Number.parseInt(searchParams.get(\"page\") || \"0\");\n        const limit = 10;\n        const startIndex = page * limit;\n        const endIndex = startIndex + limit;\n        const paginatedArticles = mockArticles.slice(startIndex, endIndex);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            articles: paginatedArticles,\n            nextPage: endIndex < mockArticles.length ? page + 1 : null,\n            usingMockData: true,\n            error: \"Database connection failed, using mock data\",\n            debug: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxHQUFHLENBQUMsV0FBVztRQUN6RCxNQUFNQyxRQUFRO1FBQ2QsTUFBTVUsYUFBYWQsT0FBT0k7UUFDMUIsTUFBTVcsV0FBV0QsYUFBYVY7UUFDOUIsTUFBTVksb0JBQW9CaEMsYUFBYWlDLEtBQUssQ0FBQ0gsWUFBWUM7UUFFekQsT0FBT25DLHFEQUFZQSxDQUFDc0MsSUFBSSxDQUFDO1lBQ3ZCQyxVQUFVSDtZQUNWSSxVQUFVTCxXQUFXL0IsYUFBYXFDLE1BQU0sR0FBR3JCLE9BQU8sSUFBSTtZQUN0RHNCLGVBQWU7WUFDZm1CLE9BQU87WUFDUGxCLE9BQU9rQixNQUFNQyxPQUFPO1FBQ3RCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hraS16b25lLy4vYXBwL2FwaS9hcnRpY2xlcy9yb3V0ZS50cz9mYzhkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgeyBnZXRBcnRpY2xlcywgY2hlY2tEYXRhYmFzZVNldHVwIH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlXCJcblxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYydcblxuLy8gTW9jayBkYXRhIGFzIGZhbGxiYWNrXG5jb25zdCBtb2NrQXJ0aWNsZXMgPSBbXG4gIHtcbiAgICBpZDogXCIxXCIsXG4gICAgdGl0bGU6IFwiQUkgUmV2b2x1dGlvbjogSG93IE1hY2hpbmUgTGVhcm5pbmcgaXMgVHJhbnNmb3JtaW5nIEhlYWx0aGNhcmVcIixcbiAgICBzdW1tYXJ5OlxuICAgICAgXCJBcnRpZmljaWFsIGludGVsbGlnZW5jZSBpcyByZXZvbHV0aW9uaXppbmcgaGVhbHRoY2FyZSB3aXRoIGJyZWFrdGhyb3VnaCBhcHBsaWNhdGlvbnMgaW4gZGlhZ25vc2lzLCB0cmVhdG1lbnQgcGxhbm5pbmcsIGFuZCBkcnVnIGRpc2NvdmVyeS4gUmVjZW50IHN0dWRpZXMgc2hvdyBBSSBjYW4gZGV0ZWN0IGRpc2Vhc2VzIGVhcmxpZXIgdGhhbiB0cmFkaXRpb25hbCBtZXRob2RzLlwiLFxuICAgIGNvbnRlbnQ6XG4gICAgICBcIlRoZSBoZWFsdGhjYXJlIGluZHVzdHJ5IGlzIGV4cGVyaWVuY2luZyBhIHBhcmFkaWdtIHNoaWZ0IGFzIGFydGlmaWNpYWwgaW50ZWxsaWdlbmNlIHRlY2hub2xvZ2llcyBiZWNvbWUgaW5jcmVhc2luZ2x5IHNvcGhpc3RpY2F0ZWQgYW5kIGFjY2Vzc2libGUuLi5cIixcbiAgICB1cmw6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9haS1oZWFsdGhjYXJlXCIsXG4gICAgc291cmNlOiBcIlRlY2hIZWFsdGggVG9kYXlcIixcbiAgICBwdWJsaXNoZWRBdDogXCIyMDI0LTAxLTE1VDEwOjMwOjAwWlwiLFxuICAgIGltYWdlVXJsOiBcIi9wbGFjZWhvbGRlci5zdmc/aGVpZ2h0PTIwMCZ3aWR0aD0zMDBcIixcbiAgICBjYXRlZ29yeTogXCJUZWNobm9sb2d5XCIsXG4gICAgcmVhZFRpbWU6IDUsXG4gIH0sXG4gIHtcbiAgICBpZDogXCIyXCIsXG4gICAgdGl0bGU6IFwiQ2xpbWF0ZSBDaGFuZ2U6IE5ldyBDYXJib24gQ2FwdHVyZSBUZWNobm9sb2d5IFNob3dzIFByb21pc2VcIixcbiAgICBzdW1tYXJ5OlxuICAgICAgXCJTY2llbnRpc3RzIGhhdmUgZGV2ZWxvcGVkIGEgcmV2b2x1dGlvbmFyeSBjYXJib24gY2FwdHVyZSBzeXN0ZW0gdGhhdCBjb3VsZCByZW1vdmUgbWlsbGlvbnMgb2YgdG9ucyBvZiBDTzIgZnJvbSB0aGUgYXRtb3NwaGVyZSBhbm51YWxseS4gVGhlIHRlY2hub2xvZ3kgdXNlcyBhZHZhbmNlZCBtYXRlcmlhbHMgdG8gdHJhcCBjYXJib24gZWZmaWNpZW50bHkuXCIsXG4gICAgY29udGVudDpcbiAgICAgIFwiQSBicmVha3Rocm91Z2ggaW4gY2FyYm9uIGNhcHR1cmUgdGVjaG5vbG9neSBoYXMgZW1lcmdlZCBmcm9tIHJlc2VhcmNoIGxhYm9yYXRvcmllcywgb2ZmZXJpbmcgbmV3IGhvcGUgaW4gdGhlIGZpZ2h0IGFnYWluc3QgY2xpbWF0ZSBjaGFuZ2UuLi5cIixcbiAgICB1cmw6IFwiaHR0cHM6Ly9leGFtcGxlLmNvbS9jYXJib24tY2FwdHVyZVwiLFxuICAgIHNvdXJjZTogXCJFbnZpcm9ubWVudGFsIFNjaWVuY2UgV2Vla2x5XCIsXG4gICAgcHVibGlzaGVkQXQ6IFwiMjAyNC0wMS0xNFQxNDoyMDowMFpcIixcbiAgICBpbWFnZVVybDogXCIvcGxhY2Vob2xkZXIuc3ZnP2hlaWdodD0yMDAmd2lkdGg9MzAwXCIsXG4gICAgY2F0ZWdvcnk6IFwiU2NpZW5jZVwiLFxuICAgIHJlYWRUaW1lOiA0LFxuICB9LFxuICB7XG4gICAgaWQ6IFwiM1wiLFxuICAgIHRpdGxlOiBcIkNyeXB0b2N1cnJlbmN5IE1hcmtldCBTZWVzIE1ham9yIEluc3RpdHV0aW9uYWwgQWRvcHRpb25cIixcbiAgICBzdW1tYXJ5OlxuICAgICAgXCJNYWpvciBmaW5hbmNpYWwgaW5zdGl0dXRpb25zIGFyZSBpbmNyZWFzaW5nbHkgYWRvcHRpbmcgY3J5cHRvY3VycmVuY3kgc29sdXRpb25zLCB3aXRoIHNldmVyYWwgYmFua3MgYW5ub3VuY2luZyBuZXcgZGlnaXRhbCBhc3NldCBzZXJ2aWNlcy4gVGhpcyBtYXJrcyBhIHNpZ25pZmljYW50IHNoaWZ0IGluIHRyYWRpdGlvbmFsIGZpbmFuY2UuXCIsXG4gICAgY29udGVudDpcbiAgICAgIFwiVGhlIGNyeXB0b2N1cnJlbmN5IGxhbmRzY2FwZSBpcyBldm9sdmluZyByYXBpZGx5IGFzIHRyYWRpdGlvbmFsIGZpbmFuY2lhbCBpbnN0aXR1dGlvbnMgZW1icmFjZSBkaWdpdGFsIGFzc2V0cy4uLlwiLFxuICAgIHVybDogXCJodHRwczovL2V4YW1wbGUuY29tL2NyeXB0by1hZG9wdGlvblwiLFxuICAgIHNvdXJjZTogXCJGaW5hbmNpYWwgVGltZXNcIixcbiAgICBwdWJsaXNoZWRBdDogXCIyMDI0LTAxLTEzVDA5OjE1OjAwWlwiLFxuICAgIGltYWdlVXJsOiBcIi9wbGFjZWhvbGRlci5zdmc/aGVpZ2h0PTIwMCZ3aWR0aD0zMDBcIixcbiAgICBjYXRlZ29yeTogXCJGaW5hbmNlXCIsXG4gICAgcmVhZFRpbWU6IDMsXG4gIH0sXG4gIC8vIE1vY2sgY2FyIGRhdGFcbiAge1xuICAgIGlkOiBcImNhci0xXCIsXG4gICAgdGl0bGU6IFwiQk1XIFg1IHhEcml2ZTQwaVwiLFxuICAgIHN1bW1hcnk6IFwiTHV4dXJ5IFNVViB3aXRoIGV4Y2VsbGVudCBjb25kaXRpb24sIGZ1bGwgc2VydmljZSBoaXN0b3J5LCBhbmQgcHJlbWl1bSBmZWF0dXJlcy5cIixcbiAgICBjb250ZW50OiBcIk1ha2U6IEJNVywgTW9kZWw6IFg1IHhEcml2ZTQwaSwgWWVhcjogMjAyMiwgUHJpY2U6IEhLJDg1MCwwMDAsIEVuZ2luZTogMy4wTCBUdXJibywgVHJhbnNtaXNzaW9uOiBBdXRvbWF0aWMsIEZ1ZWw6IFBldHJvbCwgRG9vcnM6IDUsIENvbG9yOiBCbGFjaywgTWlsZWFnZTogMTUsMDAwIGttXCIsXG4gICAgdXJsOiBcImh0dHBzOi8vbS4yOGNhci5jb20vc2VsbF9kc3AucGhwP2hfdmlkPWV4YW1wbGUxXCIsXG4gICAgc291cmNlOiBcIjI4Y2FyXCIsXG4gICAgcHVibGlzaGVkQXQ6IFwiMjAyNC0wMS0xNVQxMjowMDowMFpcIixcbiAgICBpbWFnZVVybDogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU0OTMxNzY2MS1iZDMyYzhjZTBkYjI/dz04MDAmaD00MDAmZml0PWNyb3BcIixcbiAgICBpbWFnZXM6IFtcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NDkzMTc2NjEtYmQzMmM4Y2UwZGIyP3c9ODAwJmg9NDAwJmZpdD1jcm9wXCIsXG4gICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTU1NjI2OTA2LWZjZjEwZDY4NTFiND93PTgwMCZoPTQwMCZmaXQ9Y3JvcFwiLFxuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwNjY2NDUxNTUyNC1lZDJmNzg2YTBiZDY/dz04MDAmaD00MDAmZml0PWNyb3BcIixcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDYyMjA5NDU3NzAtYjViNmMyYzU1YmYxP3c9ODAwJmg9NDAwJmZpdD1jcm9wXCJcbiAgICBdLFxuICAgIGNhdGVnb3J5OiBcImNhcnNcIixcbiAgICByZWFkVGltZTogMixcbiAgfSxcbiAge1xuICAgIGlkOiBcImNhci0yXCIsIFxuICAgIHRpdGxlOiBcIlRveW90YSBBTFBIQVJEIDIuNSBaXCIsXG4gICAgc3VtbWFyeTogXCJQcmVtaXVtIE1QViB3aXRoIGx1eHVyeSBpbnRlcmlvciBhbmQgYWR2YW5jZWQgc2FmZXR5IGZlYXR1cmVzLlwiLFxuICAgIGNvbnRlbnQ6IFwiTWFrZTogVG95b3RhLCBNb2RlbDogQUxQSEFSRCAyLjUgWiwgWWVhcjogMjAyMywgUHJpY2U6IEhLJDU4OCwwMDAg5rib5YO5IFvljp/lg7kkNjI4LDAwMF0sIEVuZ2luZTogMi41TCBIeWJyaWQsIFRyYW5zbWlzc2lvbjogQ1ZULCBGdWVsOiBIeWJyaWQsIERvb3JzOiA0LCBDb2xvcjogV2hpdGUsIE1pbGVhZ2U6IDgsMDAwIGttXCIsXG4gICAgdXJsOiBcImh0dHBzOi8vbS4yOGNhci5jb20vc2VsbF9kc3AucGhwP2hfdmlkPWV4YW1wbGUyXCIsXG4gICAgc291cmNlOiBcIjI4Y2FyXCIsXG4gICAgcHVibGlzaGVkQXQ6IFwiMjAyNC0wMS0xNVQxMTozMDowMFpcIixcbiAgICBpbWFnZVVybDogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU1MjUxOTUwNy1kYTNiMTQyYzZlM2Q/dz04MDAmaD00MDAmZml0PWNyb3BcIixcbiAgICBpbWFnZXM6IFtcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NTI1MTk1MDctZGEzYjE0MmM2ZTNkP3c9ODAwJmg9NDAwJmZpdD1jcm9wXCIsXG4gICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTQxODk5NDgxMjgyLWQ1M2JmZmUzYzM1ZD93PTgwMCZoPTQwMCZmaXQ9Y3JvcFwiLFxuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU0OTUyMTQ2Mi01YzZiOTJkMGZmOWE/dz04MDAmaD00MDAmZml0PWNyb3BcIlxuICAgIF0sXG4gICAgY2F0ZWdvcnk6IFwiY2Fyc1wiLFxuICAgIHJlYWRUaW1lOiAyLFxuICB9LFxuICB7XG4gICAgaWQ6IFwiY2FyLTNcIixcbiAgICB0aXRsZTogXCJNZXJjZWRlcy1CZW56IEczMDAgQ0RJXCIsXG4gICAgc3VtbWFyeTogXCJJY29uaWMgRy1DbGFzcyB3aXRoIHJvYnVzdCBwZXJmb3JtYW5jZSBhbmQgbHV4dXJpb3VzIGFwcG9pbnRtZW50cy5cIixcbiAgICBjb250ZW50OiBcIk1ha2U6IE1lcmNlZGVzLUJlbnosIE1vZGVsOiBHMzAwIENESSwgWWVhcjogMjAyMSwgUHJpY2U6IEhLJDQxOSwwMDAg5rib5YO5IFvljp/lg7kkNDU4LDAwMF0sIEVuZ2luZTogMy4wTCBEaWVzZWwsIFRyYW5zbWlzc2lvbjogQXV0b21hdGljLCBGdWVsOiBEaWVzZWwsIERvb3JzOiA1LCBDb2xvcjogU2lsdmVyLCBNaWxlYWdlOiAyNSwwMDAga21cIixcbiAgICB1cmw6IFwiaHR0cHM6Ly9tLjI4Y2FyLmNvbS9zZWxsX2RzcC5waHA/aF92aWQ9ZXhhbXBsZTNcIixcbiAgICBzb3VyY2U6IFwiMjhjYXJcIixcbiAgICBwdWJsaXNoZWRBdDogXCIyMDI0LTAxLTE1VDEwOjQ1OjAwWlwiLFxuICAgIGltYWdlVXJsOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTYzNzIwMjIzMTg1LTExMDAzZDUxNjkzNT93PTgwMCZoPTQwMCZmaXQ9Y3JvcFwiLFxuICAgIGltYWdlczogW1xuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU2MzcyMDIyMzE4NS0xMTAwM2Q1MTY5MzU/dz04MDAmaD00MDAmZml0PWNyb3BcIixcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MTg4NDM0NzkzMTMtNDBmOGFmYjRiNGQ4P3c9ODAwJmg9NDAwJmZpdD1jcm9wXCIsXG4gICAgICBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTY3ODE4NzM1ODY4LWU3MWI5OTkzMmUyOT93PTgwMCZoPTQwMCZmaXQ9Y3JvcFwiLFxuICAgICAgXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTYwOTUyMTI2MzA0Ny1mOGYyMDUyOTNmMjQ/dz04MDAmaD00MDAmZml0PWNyb3BcIixcbiAgICAgIFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE2MDY2MTEwMTMwMTYtOTY5YzE5YmEwZDE1P3c9ODAwJmg9NDAwJmZpdD1jcm9wXCJcbiAgICBdLFxuICAgIGNhdGVnb3J5OiBcImNhcnNcIixcbiAgICByZWFkVGltZTogMixcbiAgfSxcbl1cblxuLy8gQWRkIGJldHRlciBsb2dnaW5nIGFuZCBkZWJ1Z2dpbmcgZm9yIHRoZSBhcnRpY2xlcyBBUElcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSByZXF1ZXN0Lm5leHRVcmwuc2VhcmNoUGFyYW1zXG4gICAgY29uc3QgcGFnZSA9IE51bWJlci5wYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KFwicGFnZVwiKSB8fCBcIjBcIilcbiAgICBjb25zdCBsaW1pdCA9IDEwXG4gICAgY29uc3QgY2F0ZWdvcnkgPSBzZWFyY2hQYXJhbXMuZ2V0KFwiY2F0ZWdvcnlcIikgfHwgbnVsbFxuICAgIGNvbnN0IGVucmljaGVkID0gc2VhcmNoUGFyYW1zLmdldChcImVucmljaGVkXCIpIC8vIFwidHJ1ZVwiLCBcImZhbHNlXCIsIG9yIG51bGxcblxuICAgIGNvbnNvbGUubG9nKFwiQXJ0aWNsZXMgQVBJIGNhbGxlZCwgY2hlY2tpbmcgZGF0YWJhc2Ugc2V0dXAuLi5cIilcbiAgICBpZiAoY2F0ZWdvcnkpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBDYXRlZ29yeSBmaWx0ZXI6ICR7Y2F0ZWdvcnl9YClcbiAgICB9XG4gICAgaWYgKGVucmljaGVkICE9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmxvZyhgRW5yaWNobWVudCBmaWx0ZXI6ICR7ZW5yaWNoZWR9YClcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBkYXRhYmFzZSBpcyBzZXQgdXAgd2l0aCBtb3JlIGRldGFpbGVkIGxvZ2dpbmdcbiAgICBjb25zdCBpc0RhdGFiYXNlUmVhZHkgPSBhd2FpdCBjaGVja0RhdGFiYXNlU2V0dXAoKVxuICAgIGNvbnNvbGUubG9nKFwiRGF0YWJhc2UgcmVhZHkgc3RhdHVzOlwiLCBpc0RhdGFiYXNlUmVhZHkpXG5cbiAgICBpZiAoIWlzRGF0YWJhc2VSZWFkeSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRGF0YWJhc2Ugbm90IHNldCB1cCwgdXNpbmcgbW9jayBkYXRhXCIpXG4gICAgICAvLyBSZXR1cm4gbW9jayBkYXRhIHdpdGggcGFnaW5hdGlvbiBhbmQgY2F0ZWdvcnkgZmlsdGVyaW5nXG4gICAgICBsZXQgZmlsdGVyZWRBcnRpY2xlcyA9IG1vY2tBcnRpY2xlc1xuICAgICAgaWYgKGNhdGVnb3J5KSB7XG4gICAgICAgIGZpbHRlcmVkQXJ0aWNsZXMgPSBtb2NrQXJ0aWNsZXMuZmlsdGVyKGFydGljbGUgPT4gXG4gICAgICAgICAgYXJ0aWNsZS5jYXRlZ29yeS50b0xvd2VyQ2FzZSgpID09PSBjYXRlZ29yeS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQXBwbHkgZW5yaWNobWVudCBmaWx0ZXIgdG8gbW9jayBkYXRhXG4gICAgICBpZiAoZW5yaWNoZWQgPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgIGZpbHRlcmVkQXJ0aWNsZXMgPSBmaWx0ZXJlZEFydGljbGVzLmZpbHRlcihhcnRpY2xlID0+IFxuICAgICAgICAgIGFydGljbGUuaWQgPT09IFwiY2FyLTFcIiAvLyBNb2NrOiBvbmx5IGNhci0xIGlzIFwiQUkgZW5oYW5jZWRcIlxuICAgICAgICApXG4gICAgICB9IGVsc2UgaWYgKGVucmljaGVkID09PSBcImZhbHNlXCIpIHtcbiAgICAgICAgZmlsdGVyZWRBcnRpY2xlcyA9IGZpbHRlcmVkQXJ0aWNsZXMuZmlsdGVyKGFydGljbGUgPT4gXG4gICAgICAgICAgYXJ0aWNsZS5pZCAhPT0gXCJjYXItMVwiIC8vIE1vY2s6IGNhci0xIGlzIEFJIGVuaGFuY2VkLCBvdGhlcnMgYXJlIG5vdFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBwYWdlICogbGltaXRcbiAgICAgIGNvbnN0IGVuZEluZGV4ID0gc3RhcnRJbmRleCArIGxpbWl0XG4gICAgICBjb25zdCBwYWdpbmF0ZWRBcnRpY2xlcyA9IGZpbHRlcmVkQXJ0aWNsZXMuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpXG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGFydGljbGVzOiBwYWdpbmF0ZWRBcnRpY2xlcyxcbiAgICAgICAgbmV4dFBhZ2U6IGVuZEluZGV4IDwgZmlsdGVyZWRBcnRpY2xlcy5sZW5ndGggPyBwYWdlICsgMSA6IG51bGwsXG4gICAgICAgIHVzaW5nTW9ja0RhdGE6IHRydWUsXG4gICAgICAgIGRlYnVnOiBcIkRhdGFiYXNlIHNldHVwIGNoZWNrIGZhaWxlZFwiLFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIkZldGNoaW5nIGFydGljbGVzIGZyb20gZGF0YWJhc2UuLi5cIilcbiAgICBjb25zdCBmaWx0ZXJzOiBhbnkgPSB7fVxuICAgIGlmIChjYXRlZ29yeSkgZmlsdGVycy5jYXRlZ29yeSA9IGNhdGVnb3J5XG4gICAgaWYgKGVucmljaGVkID09PSBcInRydWVcIikgZmlsdGVycy5pc0FpRW5oYW5jZWQgPSB0cnVlXG4gICAgaWYgKGVucmljaGVkID09PSBcImZhbHNlXCIpIGZpbHRlcnMuaXNBaUVuaGFuY2VkID0gZmFsc2VcbiAgICBcbiAgICBjb25zdCBhcnRpY2xlcyA9IGF3YWl0IGdldEFydGljbGVzKHBhZ2UsIGxpbWl0LCBmaWx0ZXJzKVxuICAgIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7YXJ0aWNsZXMubGVuZ3RofSBhcnRpY2xlcyBmcm9tIGRhdGFiYXNlYClcblxuICAgIC8vIElmIG5vIGFydGljbGVzIGluIGRhdGFiYXNlLCBmYWxsIGJhY2sgdG8gbW9jayBkYXRhXG4gICAgaWYgKGFydGljbGVzLmxlbmd0aCA9PT0gMCAmJiBwYWdlID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJObyBhcnRpY2xlcyBpbiBkYXRhYmFzZSwgdXNpbmcgbW9jayBkYXRhXCIpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBhcnRpY2xlczogbW9ja0FydGljbGVzLnNsaWNlKDAsIGxpbWl0KSxcbiAgICAgICAgbmV4dFBhZ2U6IG51bGwsXG4gICAgICAgIHVzaW5nTW9ja0RhdGE6IHRydWUsXG4gICAgICAgIGRlYnVnOiBcIk5vIGFydGljbGVzIGZvdW5kIGluIGRhdGFiYXNlXCIsXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIFRyYW5zZm9ybSB0byBtYXRjaCBmcm9udGVuZCBpbnRlcmZhY2VcbiAgICBjb25zdCB0cmFuc2Zvcm1lZEFydGljbGVzID0gYXJ0aWNsZXMubWFwKChhcnRpY2xlKSA9PiAoe1xuICAgICAgaWQ6IGFydGljbGUuaWQsXG4gICAgICB0aXRsZTogYXJ0aWNsZS50aXRsZSxcbiAgICAgIHN1bW1hcnk6IGFydGljbGUuc3VtbWFyeSxcbiAgICAgIGFpX3N1bW1hcnk6IGFydGljbGUuYWlfc3VtbWFyeSwgLy8gQWRkIHRoaXMgZmllbGQgZm9yIGVucmljaGVkIGNvbnRlbnRcbiAgICAgIGNvbnRlbnQ6IGFydGljbGUuY29udGVudCxcbiAgICAgIHVybDogYXJ0aWNsZS51cmwsXG4gICAgICBzb3VyY2U6IGFydGljbGUuc291cmNlLFxuICAgICAgcHVibGlzaGVkQXQ6IGFydGljbGUucHVibGlzaGVkX2F0IHx8IGFydGljbGUuY3JlYXRlZF9hdCxcbiAgICAgIGltYWdlVXJsOiBhcnRpY2xlLmltYWdlX3VybCB8fCBcIi9wbGFjZWhvbGRlci5zdmc/aGVpZ2h0PTIwMCZ3aWR0aD0zMDBcIixcbiAgICAgIGNhdGVnb3J5OiBhcnRpY2xlLmNhdGVnb3J5IHx8IFwiR2VuZXJhbFwiLFxuICAgICAgcmVhZFRpbWU6IE1hdGguY2VpbCgoYXJ0aWNsZS5jb250ZW50Py5sZW5ndGggfHwgMCkgLyAyMDApIHx8IDMsXG4gICAgICBpc0FpRW5oYW5jZWQ6IGFydGljbGUuaXNfYWlfZW5oYW5jZWQgfHwgZmFsc2UsXG4gICAgICBvcmlnaW5hbEFydGljbGVJZDogYXJ0aWNsZS5vcmlnaW5hbF9hcnRpY2xlX2lkLFxuICAgICAgZW5oYW5jZW1lbnRNZXRhZGF0YTogYXJ0aWNsZS5lbmhhbmNlbWVudF9tZXRhZGF0YVxuICAgIH0pKVxuXG4gICAgY29uc29sZS5sb2coXCJSZXR1cm5pbmcgcmVhbCBhcnRpY2xlcyBmcm9tIGRhdGFiYXNlXCIpXG4gICAgXG4gICAgLy8gQmV0dGVyIG5leHRQYWdlIGxvZ2ljOiBjaGVjayBpZiB3ZSBnb3QgdGhlIHJlcXVlc3RlZCBsaW1pdCBhbmQgdHJ5IHRvIHBlZWsgYWhlYWRcbiAgICBsZXQgaGFzTW9yZSA9IGZhbHNlXG4gICAgaWYgKHRyYW5zZm9ybWVkQXJ0aWNsZXMubGVuZ3RoID09PSBsaW1pdCkge1xuICAgICAgLy8gUXVpY2sgY2hlY2s6IHRyeSB0byBnZXQgb25lIG1vcmUgYXJ0aWNsZSB0byBzZWUgaWYgdGhlcmUgYXJlIG1vcmUgcGFnZXNcbiAgICAgIGNvbnN0IG5leHRQYWdlQXJ0aWNsZXMgPSBhd2FpdCBnZXRBcnRpY2xlcyhwYWdlICsgMSwgMSwgZmlsdGVycylcbiAgICAgIGhhc01vcmUgPSBuZXh0UGFnZUFydGljbGVzLmxlbmd0aCA+IDBcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIGFydGljbGVzOiB0cmFuc2Zvcm1lZEFydGljbGVzLFxuICAgICAgbmV4dFBhZ2U6IGhhc01vcmUgPyBwYWdlICsgMSA6IG51bGwsXG4gICAgICB1c2luZ01vY2tEYXRhOiBmYWxzZSxcbiAgICAgIGRlYnVnOiBcIlVzaW5nIHJlYWwgZGF0YWJhc2UgZGF0YVwiLFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGFydGljbGVzOlwiLCBlcnJvcilcblxuICAgIC8vIFJldHVybiBtb2NrIGRhdGEgYXMgZmFsbGJhY2tcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSByZXF1ZXN0Lm5leHRVcmwuc2VhcmNoUGFyYW1zXG4gICAgY29uc3QgcGFnZSA9IE51bWJlci5wYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KFwicGFnZVwiKSB8fCBcIjBcIilcbiAgICBjb25zdCBsaW1pdCA9IDEwXG4gICAgY29uc3Qgc3RhcnRJbmRleCA9IHBhZ2UgKiBsaW1pdFxuICAgIGNvbnN0IGVuZEluZGV4ID0gc3RhcnRJbmRleCArIGxpbWl0XG4gICAgY29uc3QgcGFnaW5hdGVkQXJ0aWNsZXMgPSBtb2NrQXJ0aWNsZXMuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgYXJ0aWNsZXM6IHBhZ2luYXRlZEFydGljbGVzLFxuICAgICAgbmV4dFBhZ2U6IGVuZEluZGV4IDwgbW9ja0FydGljbGVzLmxlbmd0aCA/IHBhZ2UgKyAxIDogbnVsbCxcbiAgICAgIHVzaW5nTW9ja0RhdGE6IHRydWUsXG4gICAgICBlcnJvcjogXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCwgdXNpbmcgbW9jayBkYXRhXCIsXG4gICAgICBkZWJ1ZzogZXJyb3IubWVzc2FnZSxcbiAgICB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0QXJ0aWNsZXMiLCJjaGVja0RhdGFiYXNlU2V0dXAiLCJkeW5hbWljIiwibW9ja0FydGljbGVzIiwiaWQiLCJ0aXRsZSIsInN1bW1hcnkiLCJjb250ZW50IiwidXJsIiwic291cmNlIiwicHVibGlzaGVkQXQiLCJpbWFnZVVybCIsImNhdGVnb3J5IiwicmVhZFRpbWUiLCJpbWFnZXMiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsInBhZ2UiLCJOdW1iZXIiLCJwYXJzZUludCIsImdldCIsImxpbWl0IiwiZW5yaWNoZWQiLCJjb25zb2xlIiwibG9nIiwiaXNEYXRhYmFzZVJlYWR5Iiwid2FybiIsImZpbHRlcmVkQXJ0aWNsZXMiLCJmaWx0ZXIiLCJhcnRpY2xlIiwidG9Mb3dlckNhc2UiLCJzdGFydEluZGV4IiwiZW5kSW5kZXgiLCJwYWdpbmF0ZWRBcnRpY2xlcyIsInNsaWNlIiwianNvbiIsImFydGljbGVzIiwibmV4dFBhZ2UiLCJsZW5ndGgiLCJ1c2luZ01vY2tEYXRhIiwiZGVidWciLCJmaWx0ZXJzIiwiaXNBaUVuaGFuY2VkIiwidHJhbnNmb3JtZWRBcnRpY2xlcyIsIm1hcCIsImFpX3N1bW1hcnkiLCJwdWJsaXNoZWRfYXQiLCJjcmVhdGVkX2F0IiwiaW1hZ2VfdXJsIiwiTWF0aCIsImNlaWwiLCJpc19haV9lbmhhbmNlZCIsIm9yaWdpbmFsQXJ0aWNsZUlkIiwib3JpZ2luYWxfYXJ0aWNsZV9pZCIsImVuaGFuY2VtZW50TWV0YWRhdGEiLCJlbmhhbmNlbWVudF9tZXRhZGF0YSIsImhhc01vcmUiLCJuZXh0UGFnZUFydGljbGVzIiwiZXJyb3IiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/articles/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkDatabaseSetup: () => (/* binding */ checkDatabaseSetup),\n/* harmony export */   checkHeadlinesTableSetup: () => (/* binding */ checkHeadlinesTableSetup),\n/* harmony export */   checkPerplexityNewsTableSetup: () => (/* binding */ checkPerplexityNewsTableSetup),\n/* harmony export */   cleanupOldHeadlines: () => (/* binding */ cleanupOldHeadlines),\n/* harmony export */   getArticleById: () => (/* binding */ getArticleById),\n/* harmony export */   getArticleStats: () => (/* binding */ getArticleStats),\n/* harmony export */   getArticles: () => (/* binding */ getArticles),\n/* harmony export */   getArticlesRegular: () => (/* binding */ getArticlesRegular),\n/* harmony export */   getBalancedArticles: () => (/* binding */ getBalancedArticles),\n/* harmony export */   getEnhancementStats: () => (/* binding */ getEnhancementStats),\n/* harmony export */   getHeadlines: () => (/* binding */ getHeadlines),\n/* harmony export */   getHeadlinesByCategory: () => (/* binding */ getHeadlinesByCategory),\n/* harmony export */   getPerplexityNews: () => (/* binding */ getPerplexityNews),\n/* harmony export */   getPerplexityNewsByCategory: () => (/* binding */ getPerplexityNewsByCategory),\n/* harmony export */   saveArticle: () => (/* binding */ saveArticle),\n/* harmony export */   saveHeadlines: () => (/* binding */ saveHeadlines),\n/* harmony export */   searchArticles: () => (/* binding */ searchArticles),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://egyuetfeubznhcvmtary.supabase.co\";\n// Use service role key for server-side operations, anon key for client-side\nconst supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVneXVldGZldWJ6bmhjdm10YXJ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzNzUwMDUsImV4cCI6MjA2Njk1MTAwNX0.0Pp5fprFclRqGciWqI4BusTro6wgxXCFWpI6AaKH0tw\";\nif (!supabaseUrl) {\n    throw new Error(\"Missing NEXT_PUBLIC_SUPABASE_URL environment variable\");\n}\nif (!supabaseKey) {\n    throw new Error(\"Missing SUPABASE_SERVICE_ROLE_KEY or NEXT_PUBLIC_SUPABASE_ANON_KEY environment variable\");\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\nasync function saveArticle(article) {\n    try {\n        // Check if article already exists by URL\n        const { data: existing } = await supabase.from(\"articles\").select(\"id, title, created_at\").eq(\"url\", article.url).single();\n        if (existing) {\n            console.log(`‚è≠Ô∏è  Article already exists (skipping): ${article.title}`);\n            console.log(`   üìÖ Originally saved: ${new Date(existing.created_at).toLocaleString()}`);\n            return {\n                ...existing,\n                skipped: true\n            };\n        }\n        // Insert new article\n        const { data, error } = await supabase.from(\"articles\").insert([\n            {\n                title: article.title,\n                content: article.content,\n                summary: article.summary,\n                ai_summary: article.ai_summary,\n                url: article.url,\n                source: article.source,\n                author: article.author,\n                image_url: article.imageUrl || article.image_url,\n                category: article.category || \"General\",\n                is_ai_enhanced: article.is_ai_enhanced || false,\n                original_article_id: article.original_article_id,\n                enhancement_metadata: article.enhancement_metadata\n            }\n        ]).select().single();\n        if (error) {\n            console.error(\"Error saving article:\", error);\n            throw error;\n        }\n        console.log(`‚úÖ Saved new article: ${article.title}`);\n        return {\n            ...data,\n            skipped: false\n        };\n    } catch (error) {\n        console.error(\"Error in saveArticle:\", error);\n        throw error;\n    }\n}\nasync function getArticleStats() {\n    try {\n        const { data, error } = await supabase.from(\"articles\").select(\"source, created_at\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Error fetching article stats:\", error);\n            return null;\n        }\n        const stats = {\n            total: data.length,\n            bySource: {},\n            latest: data[0]?.created_at,\n            oldest: data[data.length - 1]?.created_at\n        };\n        // Count by source\n        data.forEach((article)=>{\n            stats.bySource[article.source] = (stats.bySource[article.source] || 0) + 1;\n        });\n        return stats;\n    } catch (error) {\n        console.error(\"Error getting article stats:\", error);\n        return null;\n    }\n}\n// Balanced query function to ensure proportional representation from all sources\nasync function getBalancedArticles(page = 0, limit = 10, filters) {\n    try {\n        // If specific source or category filter is applied, use regular query\n        if (filters?.source || filters?.category) {\n            return getArticlesRegular(page, limit, filters);\n        }\n        // Define known sources and their desired proportions\n        const sources = [\n            \"HK01\",\n            \"on.cc\",\n            \"SingTao\",\n            \"RTHK\",\n            \"HKFP\",\n            \"ONCC\",\n            \"am730\",\n            \"scmp\",\n            \"bloomberg\"\n        ];\n        const articlesPerSource = Math.max(1, Math.floor(limit / sources.length));\n        const extraArticles = limit % sources.length;\n        const allArticles = [];\n        // Get articles from each source proportionally with proper pagination\n        for(let i = 0; i < sources.length; i++){\n            const source = sources[i];\n            const sourceLimit = articlesPerSource + (i < extraArticles ? 1 : 0);\n            let query = supabase.from(\"articles\").select(\"*\").in(\"source\", [\n                source,\n                `${source} (AI Enhanced)`\n            ]).order(\"created_at\", {\n                ascending: false\n            });\n            // Apply AI enhanced filter if specified\n            if (filters?.isAiEnhanced !== undefined) {\n                query = query.eq(\"is_ai_enhanced\", filters.isAiEnhanced);\n            }\n            // Apply language filter if specified - use only metadata (language column doesn't exist)\n            if (filters?.language) {\n                if (filters.language !== \"en\") {\n                    // For non-English languages, check metadata language\n                    query = query.eq(\"enhancement_metadata->>language\", filters.language);\n                } else {\n                    // For English, include articles where metadata shows 'en' OR metadata language is null/missing\n                    query = query.or(`enhancement_metadata->>language.eq.en,enhancement_metadata->>language.is.null`);\n                }\n            }\n            // Use proper pagination with range instead of limit + slice\n            const startIndex = sourceLimit * page;\n            const endIndex = startIndex + sourceLimit - 1;\n            const { data, error } = await query.range(startIndex, endIndex);\n            if (!error && data) {\n                allArticles.push(...data);\n            }\n        }\n        // Sort the mixed articles by creation date (newest first)\n        allArticles.sort((a, b)=>new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n        return allArticles.slice(0, limit);\n    } catch (error) {\n        console.error(\"Error fetching balanced articles:\", error);\n        // Fallback to regular query\n        return getArticlesRegular(page, limit, filters);\n    }\n}\n// Original query function (renamed for clarity)\nasync function getArticlesRegular(page = 0, limit = 10, filters) {\n    try {\n        let query = supabase.from(\"articles\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        // Apply filters if provided\n        if (filters?.source) {\n            query = query.eq(\"source\", filters.source);\n        }\n        if (filters?.category) {\n            query = query.eq(\"category\", filters.category);\n        }\n        if (filters?.isAiEnhanced !== undefined) {\n            query = query.eq(\"is_ai_enhanced\", filters.isAiEnhanced);\n        }\n        // Apply language filter if specified - use only metadata (language column doesn't exist)\n        if (filters?.language) {\n            if (filters.language !== \"en\") {\n                // For non-English languages, check metadata language\n                query = query.eq(\"enhancement_metadata->>language\", filters.language);\n            } else {\n                // For English, include articles where metadata shows 'en' OR metadata language is null/missing\n                query = query.or(`enhancement_metadata->>language.eq.en,enhancement_metadata->>language.is.null`);\n            }\n        }\n        if (filters?.hasEnrichment !== undefined) {\n            if (filters.hasEnrichment) {\n                query = query.not(\"ai_summary\", \"is\", null);\n            } else {\n                query = query.is(\"ai_summary\", null);\n            }\n        }\n        const { data, error } = await query.range(page * limit, (page + 1) * limit - 1);\n        if (error) {\n            // If table doesn't exist, return empty array instead of throwing\n            if (error.code === \"42P01\" || error.message.includes(\"does not exist\")) {\n                console.warn(\"Articles table does not exist. Please run the database setup.\");\n                return [];\n            }\n            throw error;\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching articles:\", error);\n        return [];\n    }\n}\n// Main export - use regular query for better pagination reliability\nasync function getArticles(page = 0, limit = 10, filters) {\n    return getArticlesRegular(page, limit, filters);\n}\nasync function searchArticles(query) {\n    try {\n        const { data, error } = await supabase.from(\"articles\").select(\"*\").or(`title.ilike.%${query}%,summary.ilike.%${query}%,ai_summary.ilike.%${query}%`).order(\"created_at\", {\n            ascending: false\n        }).limit(20);\n        if (error) {\n            // If table doesn't exist, return empty array instead of throwing\n            if (error.code === \"42P01\" || error.message.includes(\"does not exist\")) {\n                console.warn(\"Articles table does not exist. Please run the database setup.\");\n                return [];\n            }\n            throw error;\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Error searching articles:\", error);\n        return [];\n    }\n}\nasync function getArticleById(id) {\n    try {\n        console.log(`üìç getArticleById called with ID: ${id}`);\n        const { data, error } = await supabase.from(\"articles\").select(\"*\").eq(\"id\", id).single();\n        if (error) {\n            console.error(`‚ùå Error fetching article ${id}:`, error);\n            // If not found, log sample IDs for debugging\n            if (error.code === \"PGRST116\") {\n                const { data: sampleArticles } = await supabase.from(\"articles\").select(\"id\").limit(5);\n                console.log(\"\\uD83D\\uDCCB Sample article IDs in database:\", sampleArticles?.map((a)=>a.id));\n            }\n            // If table doesn't exist, return null instead of throwing\n            if (error.code === \"42P01\" || error.message.includes(\"does not exist\")) {\n                console.warn(\"Articles table does not exist. Please run the database setup.\");\n                return null;\n            }\n            throw error;\n        }\n        console.log(`‚úÖ Found article: ${data.title}`);\n        return data;\n    } catch (error) {\n        console.error(\"Error fetching article by ID:\", error);\n        return null;\n    }\n}\n// Function to get enhancement statistics\nasync function getEnhancementStats() {\n    try {\n        const { data, error } = await supabase.rpc(\"get_enhancement_stats\");\n        if (error) {\n            console.error(\"Error fetching enhancement stats:\", error);\n            return null;\n        }\n        return data?.[0] || null;\n    } catch (error) {\n        console.error(\"Error getting enhancement stats:\", error);\n        return null;\n    }\n}\n// Function to check if database is set up\nasync function checkDatabaseSetup() {\n    try {\n        console.log(\"Checking database setup...\");\n        // Add timeout to prevent hanging requests\n        const timeoutPromise = new Promise((_, reject)=>setTimeout(()=>reject(new Error(\"Database check timeout\")), 3000));\n        // Try to select from articles table with timeout\n        const dbPromise = supabase.from(\"articles\").select(\"id\").limit(1);\n        const { data, error } = await Promise.race([\n            dbPromise,\n            timeoutPromise\n        ]);\n        console.log(\"Database check result:\", {\n            data,\n            error\n        });\n        if (error) {\n            console.error(\"Database check error:\", error);\n            // Check for specific error codes that indicate table doesn't exist\n            if (error.code === \"42P01\" || error.message.includes(\"does not exist\") || error.message.includes(\"relation\") || error.message.includes(\"table\")) {\n                return false;\n            }\n            // Check for RLS/permission errors (common after enabling Realtime)\n            if (error.code === \"42501\" || error.message.includes(\"permission denied\") || error.message.includes(\"RLS\") || error.message.includes(\"policy\")) {\n                console.warn(\"Database exists but RLS policies may be blocking access\");\n                return false;\n            }\n            // For other errors, assume table exists but there might be permission issues\n            return true;\n        }\n        console.log(\"Database setup check passed\");\n        return true;\n    } catch (error) {\n        console.error(\"Database setup check failed:\", error);\n        // Handle timeout and other errors\n        if (error.message === \"Database check timeout\") {\n            console.warn(\"Database check timed out - likely RLS policy issue\");\n        }\n        return false;\n    }\n}\nasync function saveHeadlines(headlines) {\n    try {\n        const { data, error } = await supabase.from(\"headlines\").insert(headlines).select();\n        if (error) {\n            console.error(\"Error saving headlines:\", error);\n            throw error;\n        }\n        console.log(`‚úÖ Saved ${headlines.length} headlines`);\n        return data;\n    } catch (error) {\n        console.error(\"Error in saveHeadlines:\", error);\n        throw error;\n    }\n}\nasync function getHeadlines(category) {\n    try {\n        let query = supabase.from(\"headlines\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (category) {\n            query = query.eq(\"category\", category);\n        }\n        const { data, error } = await query;\n        if (error) {\n            if (error.code === \"42P01\" || error.message.includes(\"does not exist\")) {\n                console.warn(\"Headlines table does not exist. Please run the database setup.\");\n                return [];\n            }\n            throw error;\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching headlines:\", error);\n        return [];\n    }\n}\nasync function getHeadlinesByCategory() {\n    try {\n        const { data, error } = await supabase.from(\"headlines\").select(\"*\").order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            if (error.code === \"42P01\" || error.message.includes(\"does not exist\")) {\n                console.warn(\"Headlines table does not exist. Please run the database setup.\");\n                return {};\n            }\n            throw error;\n        }\n        // Group headlines by category (max 10 per category)\n        const groupedHeadlines = (data || []).reduce((acc, headline)=>{\n            if (!acc[headline.category]) {\n                acc[headline.category] = [];\n            }\n            if (acc[headline.category].length < 10) {\n                acc[headline.category].push(headline);\n            }\n            return acc;\n        }, {});\n        return groupedHeadlines;\n    } catch (error) {\n        console.error(\"Error fetching headlines by category:\", error);\n        return {};\n    }\n}\nasync function cleanupOldHeadlines() {\n    try {\n        const { error } = await supabase.from(\"headlines\").delete().lt(\"created_at\", new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString());\n        if (error) {\n            console.error(\"Error cleaning up old headlines:\", error);\n            throw error;\n        }\n        console.log(\"‚úÖ Cleaned up old headlines\");\n    } catch (error) {\n        console.error(\"Error in cleanupOldHeadlines:\", error);\n        throw error;\n    }\n}\nasync function checkHeadlinesTableSetup() {\n    try {\n        const { data, error } = await supabase.from(\"headlines\").select(\"id\").limit(1);\n        if (error) {\n            if (error.code === \"42P01\" || error.message.includes(\"does not exist\")) {\n                return false;\n            }\n            throw error;\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Headlines table setup check failed:\", error);\n        return false;\n    }\n}\nasync function getPerplexityNews(category, limit = 20) {\n    try {\n        let query = supabase.from(\"perplexity_news\").select(\"*\").eq(\"article_status\", \"ready\").order(\"updated_at\", {\n            ascending: false\n        });\n        if (category) {\n            query = query.eq(\"category\", category);\n        }\n        const { data, error } = await query.limit(limit);\n        if (error) {\n            if (error.code === \"42P01\" || error.message.includes(\"does not exist\")) {\n                console.warn(\"Perplexity news table does not exist. Please run the database setup.\");\n                return [];\n            }\n            throw error;\n        }\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching Perplexity news:\", error);\n        return [];\n    }\n}\nasync function getPerplexityNewsByCategory() {\n    try {\n        const { data, error } = await supabase.from(\"perplexity_news\").select(\"*\").eq(\"article_status\", \"ready\").order(\"updated_at\", {\n            ascending: false\n        });\n        if (error) {\n            if (error.code === \"42P01\" || error.message.includes(\"does not exist\")) {\n                console.warn(\"Perplexity news table does not exist. Please run the database setup.\");\n                return {};\n            }\n            throw error;\n        }\n        // Group by category (max 10 per category)\n        const groupedNews = (data || []).reduce((acc, article)=>{\n            if (!acc[article.category]) {\n                acc[article.category] = [];\n            }\n            if (acc[article.category].length < 10) {\n                acc[article.category].push(article);\n            }\n            return acc;\n        }, {});\n        return groupedNews;\n    } catch (error) {\n        console.error(\"Error fetching Perplexity news by category:\", error);\n        return {};\n    }\n}\nasync function checkPerplexityNewsTableSetup() {\n    try {\n        const { data, error } = await supabase.from(\"perplexity_news\").select(\"id\").limit(1);\n        if (error) {\n            if (error.code === \"42P01\" || error.message.includes(\"does not exist\")) {\n                return false;\n            }\n            throw error;\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Perplexity news table setup check failed:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVKLE9BQU9VO0lBQ1QsRUFBRSxPQUFPM0YsT0FBTztRQUNkUCxRQUFRTyxLQUFLLENBQUMsK0NBQStDQTtRQUM3RCxPQUFPLENBQUM7SUFDVjtBQUNGO0FBRU8sZUFBZTRGO0lBQ3BCLElBQUk7UUFDRixNQUFNLEVBQUUxRyxJQUFJLEVBQUVjLEtBQUssRUFBRSxHQUFHLE1BQU1qQixTQUMzQkssSUFBSSxDQUFDLG1CQUNMQyxNQUFNLENBQUMsTUFDUG9DLEtBQUssQ0FBQztRQUVULElBQUl6QixPQUFPO1lBQ1QsSUFBSUEsTUFBTXVELElBQUksS0FBSyxXQUFXdkQsTUFBTXdELE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLG1CQUFtQjtnQkFDdEUsT0FBTztZQUNUO1lBQ0EsTUFBTXpEO1FBQ1I7UUFFQSxPQUFPO0lBQ1QsRUFBRSxPQUFPQSxPQUFPO1FBQ2RQLFFBQVFPLEtBQUssQ0FBQyw2Q0FBNkNBO1FBQzNELE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGtpLXpvbmUvLi9saWIvc3VwYWJhc2UudHM/Yzk5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCJcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhXG4vLyBVc2Ugc2VydmljZSByb2xlIGtleSBmb3Igc2VydmVyLXNpZGUgb3BlcmF0aW9ucywgYW5vbiBrZXkgZm9yIGNsaWVudC1zaWRlXG5jb25zdCBzdXBhYmFzZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgfHwgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhXG5cbmlmICghc3VwYWJhc2VVcmwpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCBlbnZpcm9ubWVudCB2YXJpYWJsZScpXG59XG5cbmlmICghc3VwYWJhc2VLZXkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgb3IgTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUnKVxufVxuXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5KVxuXG5leHBvcnQgaW50ZXJmYWNlIEFydGljbGUge1xuICBpZD86IHN0cmluZ1xuICB0aXRsZTogc3RyaW5nXG4gIGNvbnRlbnQ6IHN0cmluZ1xuICBzdW1tYXJ5OiBzdHJpbmdcbiAgYWlfc3VtbWFyeT86IHN0cmluZ1xuICB1cmw6IHN0cmluZ1xuICBzb3VyY2U6IHN0cmluZ1xuICBhdXRob3I/OiBzdHJpbmdcbiAgcHVibGlzaGVkX2F0Pzogc3RyaW5nXG4gIGltYWdlX3VybD86IHN0cmluZ1xuICBpbWFnZV9tZXRhZGF0YT86IHtcbiAgICBvcmlnaW5hbD86IHN0cmluZ1xuICAgIG9wdGltaXplZD86IHN0cmluZ1xuICAgIHdoYXRzYXBwPzogc3RyaW5nXG4gIH1cbiAgY2F0ZWdvcnk/OiBzdHJpbmdcbiAgY3JlYXRlZF9hdD86IHN0cmluZ1xuICB1cGRhdGVkX2F0Pzogc3RyaW5nXG4gIGlzX2FpX2VuaGFuY2VkPzogYm9vbGVhblxuICBvcmlnaW5hbF9hcnRpY2xlX2lkPzogc3RyaW5nXG4gIGVuaGFuY2VtZW50X21ldGFkYXRhPzoge1xuICAgIHNlYXJjaFF1ZXJpZXM6IHN0cmluZ1tdXG4gICAgc291cmNlczogc3RyaW5nW11cbiAgICByZWxhdGVkVG9waWNzOiBzdHJpbmdbXVxuICAgIGVuaGFuY2VkQXQ6IHN0cmluZ1xuICAgIGVuaGFuY2VtZW50Q29zdD86IHN0cmluZ1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlQXJ0aWNsZShhcnRpY2xlOiBBcnRpY2xlKSB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgYXJ0aWNsZSBhbHJlYWR5IGV4aXN0cyBieSBVUkxcbiAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJhcnRpY2xlc1wiKVxuICAgICAgLnNlbGVjdChcImlkLCB0aXRsZSwgY3JlYXRlZF9hdFwiKVxuICAgICAgLmVxKFwidXJsXCIsIGFydGljbGUudXJsKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIGNvbnNvbGUubG9nKGDij63vuI8gIEFydGljbGUgYWxyZWFkeSBleGlzdHMgKHNraXBwaW5nKTogJHthcnRpY2xlLnRpdGxlfWApXG4gICAgICBjb25zb2xlLmxvZyhgICAg8J+ThSBPcmlnaW5hbGx5IHNhdmVkOiAke25ldyBEYXRlKGV4aXN0aW5nLmNyZWF0ZWRfYXQpLnRvTG9jYWxlU3RyaW5nKCl9YClcbiAgICAgIHJldHVybiB7IC4uLmV4aXN0aW5nLCBza2lwcGVkOiB0cnVlIH1cbiAgICB9XG5cbiAgICAvLyBJbnNlcnQgbmV3IGFydGljbGVcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJhcnRpY2xlc1wiKVxuICAgICAgLmluc2VydChbXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogYXJ0aWNsZS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBhcnRpY2xlLmNvbnRlbnQsXG4gICAgICAgICAgc3VtbWFyeTogYXJ0aWNsZS5zdW1tYXJ5LFxuICAgICAgICAgIGFpX3N1bW1hcnk6IGFydGljbGUuYWlfc3VtbWFyeSxcbiAgICAgICAgICB1cmw6IGFydGljbGUudXJsLFxuICAgICAgICAgIHNvdXJjZTogYXJ0aWNsZS5zb3VyY2UsXG4gICAgICAgICAgYXV0aG9yOiBhcnRpY2xlLmF1dGhvcixcbiAgICAgICAgICBpbWFnZV91cmw6IChhcnRpY2xlIGFzIGFueSkuaW1hZ2VVcmwgfHwgYXJ0aWNsZS5pbWFnZV91cmwsXG4gICAgICAgICAgY2F0ZWdvcnk6IGFydGljbGUuY2F0ZWdvcnkgfHwgXCJHZW5lcmFsXCIsXG4gICAgICAgICAgaXNfYWlfZW5oYW5jZWQ6IGFydGljbGUuaXNfYWlfZW5oYW5jZWQgfHwgZmFsc2UsXG4gICAgICAgICAgb3JpZ2luYWxfYXJ0aWNsZV9pZDogYXJ0aWNsZS5vcmlnaW5hbF9hcnRpY2xlX2lkLFxuICAgICAgICAgIGVuaGFuY2VtZW50X21ldGFkYXRhOiBhcnRpY2xlLmVuaGFuY2VtZW50X21ldGFkYXRhLFxuICAgICAgICB9LFxuICAgICAgXSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzYXZpbmcgYXJ0aWNsZTpcIiwgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGDinIUgU2F2ZWQgbmV3IGFydGljbGU6ICR7YXJ0aWNsZS50aXRsZX1gKVxuICAgIHJldHVybiB7IC4uLmRhdGEsIHNraXBwZWQ6IGZhbHNlIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gc2F2ZUFydGljbGU6XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFydGljbGVTdGF0cygpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJhcnRpY2xlc1wiKVxuICAgICAgLnNlbGVjdChcInNvdXJjZSwgY3JlYXRlZF9hdFwiKVxuICAgICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGFydGljbGUgc3RhdHM6XCIsIGVycm9yKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBjb25zdCBzdGF0cyA9IHtcbiAgICAgIHRvdGFsOiBkYXRhLmxlbmd0aCxcbiAgICAgIGJ5U291cmNlOiB7fSxcbiAgICAgIGxhdGVzdDogZGF0YVswXT8uY3JlYXRlZF9hdCxcbiAgICAgIG9sZGVzdDogZGF0YVtkYXRhLmxlbmd0aCAtIDFdPy5jcmVhdGVkX2F0LFxuICAgIH1cblxuICAgIC8vIENvdW50IGJ5IHNvdXJjZVxuICAgIGRhdGEuZm9yRWFjaCgoYXJ0aWNsZSkgPT4ge1xuICAgICAgc3RhdHMuYnlTb3VyY2VbYXJ0aWNsZS5zb3VyY2VdID0gKHN0YXRzLmJ5U291cmNlW2FydGljbGUuc291cmNlXSB8fCAwKSArIDFcbiAgICB9KVxuXG4gICAgcmV0dXJuIHN0YXRzXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgYXJ0aWNsZSBzdGF0czpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vLyBCYWxhbmNlZCBxdWVyeSBmdW5jdGlvbiB0byBlbnN1cmUgcHJvcG9ydGlvbmFsIHJlcHJlc2VudGF0aW9uIGZyb20gYWxsIHNvdXJjZXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRCYWxhbmNlZEFydGljbGVzKHBhZ2UgPSAwLCBsaW1pdCA9IDEwLCBmaWx0ZXJzPzogeyBzb3VyY2U/OiBzdHJpbmcsIGlzQWlFbmhhbmNlZD86IGJvb2xlYW4sIGxhbmd1YWdlPzogc3RyaW5nLCBjYXRlZ29yeT86IHN0cmluZywgaGFzRW5yaWNobWVudD86IGJvb2xlYW4gfSkge1xuICB0cnkge1xuICAgIC8vIElmIHNwZWNpZmljIHNvdXJjZSBvciBjYXRlZ29yeSBmaWx0ZXIgaXMgYXBwbGllZCwgdXNlIHJlZ3VsYXIgcXVlcnlcbiAgICBpZiAoZmlsdGVycz8uc291cmNlIHx8IGZpbHRlcnM/LmNhdGVnb3J5KSB7XG4gICAgICByZXR1cm4gZ2V0QXJ0aWNsZXNSZWd1bGFyKHBhZ2UsIGxpbWl0LCBmaWx0ZXJzKVxuICAgIH1cblxuICAgIC8vIERlZmluZSBrbm93biBzb3VyY2VzIGFuZCB0aGVpciBkZXNpcmVkIHByb3BvcnRpb25zXG4gICAgY29uc3Qgc291cmNlcyA9IFsnSEswMScsICdvbi5jYycsICdTaW5nVGFvJywgJ1JUSEsnLCAnSEtGUCcsICdPTkNDJywgJ2FtNzMwJywgJ3NjbXAnLCAnYmxvb21iZXJnJ11cbiAgICBjb25zdCBhcnRpY2xlc1BlclNvdXJjZSA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IobGltaXQgLyBzb3VyY2VzLmxlbmd0aCkpXG4gICAgY29uc3QgZXh0cmFBcnRpY2xlcyA9IGxpbWl0ICUgc291cmNlcy5sZW5ndGhcbiAgICBcbiAgICBjb25zdCBhbGxBcnRpY2xlcyA9IFtdXG4gICAgXG4gICAgLy8gR2V0IGFydGljbGVzIGZyb20gZWFjaCBzb3VyY2UgcHJvcG9ydGlvbmFsbHkgd2l0aCBwcm9wZXIgcGFnaW5hdGlvblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc291cmNlID0gc291cmNlc1tpXVxuICAgICAgY29uc3Qgc291cmNlTGltaXQgPSBhcnRpY2xlc1BlclNvdXJjZSArIChpIDwgZXh0cmFBcnRpY2xlcyA/IDEgOiAwKVxuICAgICAgXG4gICAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxuICAgICAgICAuZnJvbShcImFydGljbGVzXCIpXG4gICAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAgIC5pbignc291cmNlJywgW3NvdXJjZSwgYCR7c291cmNlfSAoQUkgRW5oYW5jZWQpYF0pXG4gICAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICBcbiAgICAgIC8vIEFwcGx5IEFJIGVuaGFuY2VkIGZpbHRlciBpZiBzcGVjaWZpZWRcbiAgICAgIGlmIChmaWx0ZXJzPy5pc0FpRW5oYW5jZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdpc19haV9lbmhhbmNlZCcsIGZpbHRlcnMuaXNBaUVuaGFuY2VkKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBcHBseSBsYW5ndWFnZSBmaWx0ZXIgaWYgc3BlY2lmaWVkIC0gdXNlIG9ubHkgbWV0YWRhdGEgKGxhbmd1YWdlIGNvbHVtbiBkb2Vzbid0IGV4aXN0KVxuICAgICAgaWYgKGZpbHRlcnM/Lmxhbmd1YWdlKSB7XG4gICAgICAgIGlmIChmaWx0ZXJzLmxhbmd1YWdlICE9PSBcImVuXCIpIHtcbiAgICAgICAgICAvLyBGb3Igbm9uLUVuZ2xpc2ggbGFuZ3VhZ2VzLCBjaGVjayBtZXRhZGF0YSBsYW5ndWFnZVxuICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ2VuaGFuY2VtZW50X21ldGFkYXRhLT4+bGFuZ3VhZ2UnLCBmaWx0ZXJzLmxhbmd1YWdlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEZvciBFbmdsaXNoLCBpbmNsdWRlIGFydGljbGVzIHdoZXJlIG1ldGFkYXRhIHNob3dzICdlbicgT1IgbWV0YWRhdGEgbGFuZ3VhZ2UgaXMgbnVsbC9taXNzaW5nXG4gICAgICAgICAgcXVlcnkgPSBxdWVyeS5vcihgZW5oYW5jZW1lbnRfbWV0YWRhdGEtPj5sYW5ndWFnZS5lcS5lbixlbmhhbmNlbWVudF9tZXRhZGF0YS0+Pmxhbmd1YWdlLmlzLm51bGxgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVzZSBwcm9wZXIgcGFnaW5hdGlvbiB3aXRoIHJhbmdlIGluc3RlYWQgb2YgbGltaXQgKyBzbGljZVxuICAgICAgY29uc3Qgc3RhcnRJbmRleCA9IHNvdXJjZUxpbWl0ICogcGFnZVxuICAgICAgY29uc3QgZW5kSW5kZXggPSBzdGFydEluZGV4ICsgc291cmNlTGltaXQgLSAxXG4gICAgICBcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5LnJhbmdlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KVxuICAgICAgXG4gICAgICBpZiAoIWVycm9yICYmIGRhdGEpIHtcbiAgICAgICAgYWxsQXJ0aWNsZXMucHVzaCguLi5kYXRhKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTb3J0IHRoZSBtaXhlZCBhcnRpY2xlcyBieSBjcmVhdGlvbiBkYXRlIChuZXdlc3QgZmlyc3QpXG4gICAgYWxsQXJ0aWNsZXMuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkX2F0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmNyZWF0ZWRfYXQpLmdldFRpbWUoKSlcbiAgICBcbiAgICByZXR1cm4gYWxsQXJ0aWNsZXMuc2xpY2UoMCwgbGltaXQpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGJhbGFuY2VkIGFydGljbGVzOlwiLCBlcnJvcilcbiAgICAvLyBGYWxsYmFjayB0byByZWd1bGFyIHF1ZXJ5XG4gICAgcmV0dXJuIGdldEFydGljbGVzUmVndWxhcihwYWdlLCBsaW1pdCwgZmlsdGVycylcbiAgfVxufVxuXG4vLyBPcmlnaW5hbCBxdWVyeSBmdW5jdGlvbiAocmVuYW1lZCBmb3IgY2xhcml0eSlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBcnRpY2xlc1JlZ3VsYXIocGFnZSA9IDAsIGxpbWl0ID0gMTAsIGZpbHRlcnM/OiB7IHNvdXJjZT86IHN0cmluZywgaXNBaUVuaGFuY2VkPzogYm9vbGVhbiwgbGFuZ3VhZ2U/OiBzdHJpbmcsIGNhdGVnb3J5Pzogc3RyaW5nLCBoYXNFbnJpY2htZW50PzogYm9vbGVhbiB9KSB7XG4gIHRyeSB7XG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiYXJ0aWNsZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAub3JkZXIoXCJjcmVhdGVkX2F0XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgIFxuICAgIC8vIEFwcGx5IGZpbHRlcnMgaWYgcHJvdmlkZWRcbiAgICBpZiAoZmlsdGVycz8uc291cmNlKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdzb3VyY2UnLCBmaWx0ZXJzLnNvdXJjZSlcbiAgICB9XG4gICAgXG4gICAgaWYgKGZpbHRlcnM/LmNhdGVnb3J5KSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjYXRlZ29yeScsIGZpbHRlcnMuY2F0ZWdvcnkpXG4gICAgfVxuICAgIFxuICAgIGlmIChmaWx0ZXJzPy5pc0FpRW5oYW5jZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnaXNfYWlfZW5oYW5jZWQnLCBmaWx0ZXJzLmlzQWlFbmhhbmNlZClcbiAgICB9XG4gICAgXG4gICAgLy8gQXBwbHkgbGFuZ3VhZ2UgZmlsdGVyIGlmIHNwZWNpZmllZCAtIHVzZSBvbmx5IG1ldGFkYXRhIChsYW5ndWFnZSBjb2x1bW4gZG9lc24ndCBleGlzdClcbiAgICBpZiAoZmlsdGVycz8ubGFuZ3VhZ2UpIHtcbiAgICAgIGlmIChmaWx0ZXJzLmxhbmd1YWdlICE9PSBcImVuXCIpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1FbmdsaXNoIGxhbmd1YWdlcywgY2hlY2sgbWV0YWRhdGEgbGFuZ3VhZ2VcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnZW5oYW5jZW1lbnRfbWV0YWRhdGEtPj5sYW5ndWFnZScsIGZpbHRlcnMubGFuZ3VhZ2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3IgRW5nbGlzaCwgaW5jbHVkZSBhcnRpY2xlcyB3aGVyZSBtZXRhZGF0YSBzaG93cyAnZW4nIE9SIG1ldGFkYXRhIGxhbmd1YWdlIGlzIG51bGwvbWlzc2luZ1xuICAgICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGBlbmhhbmNlbWVudF9tZXRhZGF0YS0+Pmxhbmd1YWdlLmVxLmVuLGVuaGFuY2VtZW50X21ldGFkYXRhLT4+bGFuZ3VhZ2UuaXMubnVsbGApXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChmaWx0ZXJzPy5oYXNFbnJpY2htZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChmaWx0ZXJzLmhhc0VucmljaG1lbnQpIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5ub3QoJ2FpX3N1bW1hcnknLCAnaXMnLCBudWxsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5pcygnYWlfc3VtbWFyeScsIG51bGwpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5LnJhbmdlKHBhZ2UgKiBsaW1pdCwgKHBhZ2UgKyAxKSAqIGxpbWl0IC0gMSlcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgLy8gSWYgdGFibGUgZG9lc24ndCBleGlzdCwgcmV0dXJuIGVtcHR5IGFycmF5IGluc3RlYWQgb2YgdGhyb3dpbmdcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSBcIjQyUDAxXCIgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcImRvZXMgbm90IGV4aXN0XCIpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkFydGljbGVzIHRhYmxlIGRvZXMgbm90IGV4aXN0LiBQbGVhc2UgcnVuIHRoZSBkYXRhYmFzZSBzZXR1cC5cIilcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgICByZXR1cm4gZGF0YSB8fCBbXVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBhcnRpY2xlczpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIFtdXG4gIH1cbn1cblxuLy8gTWFpbiBleHBvcnQgLSB1c2UgcmVndWxhciBxdWVyeSBmb3IgYmV0dGVyIHBhZ2luYXRpb24gcmVsaWFiaWxpdHlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBcnRpY2xlcyhwYWdlID0gMCwgbGltaXQgPSAxMCwgZmlsdGVycz86IHsgc291cmNlPzogc3RyaW5nLCBpc0FpRW5oYW5jZWQ/OiBib29sZWFuLCBsYW5ndWFnZT86IHN0cmluZywgY2F0ZWdvcnk/OiBzdHJpbmcsIGhhc0VucmljaG1lbnQ/OiBib29sZWFuIH0pIHtcbiAgcmV0dXJuIGdldEFydGljbGVzUmVndWxhcihwYWdlLCBsaW1pdCwgZmlsdGVycylcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaEFydGljbGVzKHF1ZXJ5OiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJhcnRpY2xlc1wiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5vcihgdGl0bGUuaWxpa2UuJSR7cXVlcnl9JSxzdW1tYXJ5LmlsaWtlLiUke3F1ZXJ5fSUsYWlfc3VtbWFyeS5pbGlrZS4lJHtxdWVyeX0lYClcbiAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAubGltaXQoMjApXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIC8vIElmIHRhYmxlIGRvZXNuJ3QgZXhpc3QsIHJldHVybiBlbXB0eSBhcnJheSBpbnN0ZWFkIG9mIHRocm93aW5nXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gXCI0MlAwMVwiIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJkb2VzIG5vdCBleGlzdFwiKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJBcnRpY2xlcyB0YWJsZSBkb2VzIG5vdCBleGlzdC4gUGxlYXNlIHJ1biB0aGUgZGF0YWJhc2Ugc2V0dXAuXCIpXG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gICAgcmV0dXJuIGRhdGEgfHwgW11cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2VhcmNoaW5nIGFydGljbGVzOlwiLCBlcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXJ0aWNsZUJ5SWQoaWQ6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGDwn5ONIGdldEFydGljbGVCeUlkIGNhbGxlZCB3aXRoIElEOiAke2lkfWApXG4gICAgXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbShcImFydGljbGVzXCIpLnNlbGVjdChcIipcIikuZXEoXCJpZFwiLCBpZCkuc2luZ2xlKClcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihg4p2MIEVycm9yIGZldGNoaW5nIGFydGljbGUgJHtpZH06YCwgZXJyb3IpXG4gICAgICBcbiAgICAgIC8vIElmIG5vdCBmb3VuZCwgbG9nIHNhbXBsZSBJRHMgZm9yIGRlYnVnZ2luZ1xuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdQR1JTVDExNicpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBzYW1wbGVBcnRpY2xlcyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbShcImFydGljbGVzXCIpXG4gICAgICAgICAgLnNlbGVjdChcImlkXCIpXG4gICAgICAgICAgLmxpbWl0KDUpXG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+TiyBTYW1wbGUgYXJ0aWNsZSBJRHMgaW4gZGF0YWJhc2U6XCIsIHNhbXBsZUFydGljbGVzPy5tYXAoYSA9PiBhLmlkKSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgdGFibGUgZG9lc24ndCBleGlzdCwgcmV0dXJuIG51bGwgaW5zdGVhZCBvZiB0aHJvd2luZ1xuICAgICAgaWYgKGVycm9yLmNvZGUgPT09IFwiNDJQMDFcIiB8fCBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiZG9lcyBub3QgZXhpc3RcIikpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiQXJ0aWNsZXMgdGFibGUgZG9lcyBub3QgZXhpc3QuIFBsZWFzZSBydW4gdGhlIGRhdGFiYXNlIHNldHVwLlwiKVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYOKchSBGb3VuZCBhcnRpY2xlOiAke2RhdGEudGl0bGV9YClcbiAgICByZXR1cm4gZGF0YVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBhcnRpY2xlIGJ5IElEOlwiLCBlcnJvcilcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8vIEZ1bmN0aW9uIHRvIGdldCBlbmhhbmNlbWVudCBzdGF0aXN0aWNzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RW5oYW5jZW1lbnRTdGF0cygpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2dldF9lbmhhbmNlbWVudF9zdGF0cycpXG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBlbmhhbmNlbWVudCBzdGF0czonLCBlcnJvcilcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhPy5bMF0gfHwgbnVsbFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgZW5oYW5jZW1lbnQgc3RhdHM6JywgZXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG4vLyBGdW5jdGlvbiB0byBjaGVjayBpZiBkYXRhYmFzZSBpcyBzZXQgdXBcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0RhdGFiYXNlU2V0dXAoKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJDaGVja2luZyBkYXRhYmFzZSBzZXR1cC4uLlwiKVxuXG4gICAgLy8gQWRkIHRpbWVvdXQgdG8gcHJldmVudCBoYW5naW5nIHJlcXVlc3RzXG4gICAgY29uc3QgdGltZW91dFByb21pc2UgPSBuZXcgUHJvbWlzZTxuZXZlcj4oKF8sIHJlamVjdCkgPT4gXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ0RhdGFiYXNlIGNoZWNrIHRpbWVvdXQnKSksIDMwMDApXG4gICAgKVxuXG4gICAgLy8gVHJ5IHRvIHNlbGVjdCBmcm9tIGFydGljbGVzIHRhYmxlIHdpdGggdGltZW91dFxuICAgIGNvbnN0IGRiUHJvbWlzZSA9IHN1cGFiYXNlLmZyb20oXCJhcnRpY2xlc1wiKS5zZWxlY3QoXCJpZFwiKS5saW1pdCgxKVxuICAgIFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IFByb21pc2UucmFjZShbZGJQcm9taXNlLCB0aW1lb3V0UHJvbWlzZV0pXG5cbiAgICBjb25zb2xlLmxvZyhcIkRhdGFiYXNlIGNoZWNrIHJlc3VsdDpcIiwgeyBkYXRhLCBlcnJvciB9KVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRGF0YWJhc2UgY2hlY2sgZXJyb3I6XCIsIGVycm9yKVxuICAgICAgLy8gQ2hlY2sgZm9yIHNwZWNpZmljIGVycm9yIGNvZGVzIHRoYXQgaW5kaWNhdGUgdGFibGUgZG9lc24ndCBleGlzdFxuICAgICAgaWYgKFxuICAgICAgICBlcnJvci5jb2RlID09PSBcIjQyUDAxXCIgfHxcbiAgICAgICAgZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcImRvZXMgbm90IGV4aXN0XCIpIHx8XG4gICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJyZWxhdGlvblwiKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwidGFibGVcIilcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8vIENoZWNrIGZvciBSTFMvcGVybWlzc2lvbiBlcnJvcnMgKGNvbW1vbiBhZnRlciBlbmFibGluZyBSZWFsdGltZSlcbiAgICAgIGlmIChcbiAgICAgICAgZXJyb3IuY29kZSA9PT0gXCI0MjUwMVwiIHx8XG4gICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJwZXJtaXNzaW9uIGRlbmllZFwiKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKFwiUkxTXCIpIHx8XG4gICAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJwb2xpY3lcIilcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJEYXRhYmFzZSBleGlzdHMgYnV0IFJMUyBwb2xpY2llcyBtYXkgYmUgYmxvY2tpbmcgYWNjZXNzXCIpXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgLy8gRm9yIG90aGVyIGVycm9ycywgYXNzdW1lIHRhYmxlIGV4aXN0cyBidXQgdGhlcmUgbWlnaHQgYmUgcGVybWlzc2lvbiBpc3N1ZXNcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJEYXRhYmFzZSBzZXR1cCBjaGVjayBwYXNzZWRcIilcbiAgICByZXR1cm4gdHJ1ZVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBzZXR1cCBjaGVjayBmYWlsZWQ6XCIsIGVycm9yKVxuICAgIC8vIEhhbmRsZSB0aW1lb3V0IGFuZCBvdGhlciBlcnJvcnNcbiAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gJ0RhdGFiYXNlIGNoZWNrIHRpbWVvdXQnKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJEYXRhYmFzZSBjaGVjayB0aW1lZCBvdXQgLSBsaWtlbHkgUkxTIHBvbGljeSBpc3N1ZVwiKVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhlYWRsaW5lIHtcbiAgaWQ/OiBzdHJpbmdcbiAgY2F0ZWdvcnk6IHN0cmluZ1xuICB0aXRsZTogc3RyaW5nXG4gIHVybDogc3RyaW5nXG4gIHNvdXJjZTogc3RyaW5nXG4gIHB1Ymxpc2hlZF9hdDogc3RyaW5nXG4gIGNyZWF0ZWRfYXQ/OiBzdHJpbmdcbiAgaW1hZ2VfdXJsPzogc3RyaW5nXG4gIGF1dGhvcj86IHN0cmluZ1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZUhlYWRsaW5lcyhoZWFkbGluZXM6IEhlYWRsaW5lW10pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJoZWFkbGluZXNcIilcbiAgICAgIC5pbnNlcnQoaGVhZGxpbmVzKVxuICAgICAgLnNlbGVjdCgpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzYXZpbmcgaGVhZGxpbmVzOlwiLCBlcnJvcilcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYOKchSBTYXZlZCAke2hlYWRsaW5lcy5sZW5ndGh9IGhlYWRsaW5lc2ApXG4gICAgcmV0dXJuIGRhdGFcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gc2F2ZUhlYWRsaW5lczpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SGVhZGxpbmVzKGNhdGVnb3J5Pzogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiaGVhZGxpbmVzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcblxuICAgIGlmIChjYXRlZ29yeSkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcShcImNhdGVnb3J5XCIsIGNhdGVnb3J5KVxuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSBcIjQyUDAxXCIgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcImRvZXMgbm90IGV4aXN0XCIpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkhlYWRsaW5lcyB0YWJsZSBkb2VzIG5vdCBleGlzdC4gUGxlYXNlIHJ1biB0aGUgZGF0YWJhc2Ugc2V0dXAuXCIpXG4gICAgICAgIHJldHVybiBbXVxuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YSB8fCBbXVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBoZWFkbGluZXM6XCIsIGVycm9yKVxuICAgIHJldHVybiBbXVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRIZWFkbGluZXNCeUNhdGVnb3J5KCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImhlYWRsaW5lc1wiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSBcIjQyUDAxXCIgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcImRvZXMgbm90IGV4aXN0XCIpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkhlYWRsaW5lcyB0YWJsZSBkb2VzIG5vdCBleGlzdC4gUGxlYXNlIHJ1biB0aGUgZGF0YWJhc2Ugc2V0dXAuXCIpXG4gICAgICAgIHJldHVybiB7fVxuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG5cbiAgICAvLyBHcm91cCBoZWFkbGluZXMgYnkgY2F0ZWdvcnkgKG1heCAxMCBwZXIgY2F0ZWdvcnkpXG4gICAgY29uc3QgZ3JvdXBlZEhlYWRsaW5lcyA9IChkYXRhIHx8IFtdKS5yZWR1Y2UoKGFjYywgaGVhZGxpbmUpID0+IHtcbiAgICAgIGlmICghYWNjW2hlYWRsaW5lLmNhdGVnb3J5XSkge1xuICAgICAgICBhY2NbaGVhZGxpbmUuY2F0ZWdvcnldID0gW11cbiAgICAgIH1cbiAgICAgIGlmIChhY2NbaGVhZGxpbmUuY2F0ZWdvcnldLmxlbmd0aCA8IDEwKSB7XG4gICAgICAgIGFjY1toZWFkbGluZS5jYXRlZ29yeV0ucHVzaChoZWFkbGluZSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBIZWFkbGluZVtdPilcblxuICAgIHJldHVybiBncm91cGVkSGVhZGxpbmVzXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGhlYWRsaW5lcyBieSBjYXRlZ29yeTpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIHt9XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXBPbGRIZWFkbGluZXMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiaGVhZGxpbmVzXCIpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5sdChcImNyZWF0ZWRfYXRcIiwgbmV3IERhdGUoRGF0ZS5ub3coKSAtIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpKVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY2xlYW5pbmcgdXAgb2xkIGhlYWRsaW5lczpcIiwgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwi4pyFIENsZWFuZWQgdXAgb2xkIGhlYWRsaW5lc1wiKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBjbGVhbnVwT2xkSGVhZGxpbmVzOlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0hlYWRsaW5lc1RhYmxlU2V0dXAoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiaGVhZGxpbmVzXCIpXG4gICAgICAuc2VsZWN0KFwiaWRcIilcbiAgICAgIC5saW1pdCgxKVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gXCI0MlAwMVwiIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJkb2VzIG5vdCBleGlzdFwiKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiSGVhZGxpbmVzIHRhYmxlIHNldHVwIGNoZWNrIGZhaWxlZDpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJwbGV4aXR5TmV3cyB7XG4gIGlkPzogc3RyaW5nXG4gIGNhdGVnb3J5OiBzdHJpbmdcbiAgdGl0bGU6IHN0cmluZ1xuICB0aXRsZV9lbj86IHN0cmluZ1xuICB1cmw6IHN0cmluZ1xuICBpbnNlcnRlZF9hdD86IHN0cmluZ1xuICB1cmxfaGFzaD86IHN0cmluZ1xuICBhcnRpY2xlX3N0YXR1czogJ3BlbmRpbmcnIHwgJ2VucmljaGVkJyB8ICdyZWFkeSdcbiAgYXJ0aWNsZV9odG1sPzogc3RyaW5nXG4gIGxlZGU/OiBzdHJpbmdcbiAgaW1hZ2VfcHJvbXB0Pzogc3RyaW5nXG4gIGltYWdlX3N0YXR1czogJ3BlbmRpbmcnIHwgJ3JlYWR5JyB8ICdmYWlsZWQnXG4gIGltYWdlX3VybD86IHN0cmluZ1xuICBpbWFnZV9saWNlbnNlPzogc3RyaW5nXG4gIFxuICAvLyBFbmhhbmNlZCBzdHJ1Y3R1cmVkIGNvbnRlbnQgZmllbGRzXG4gIGVuaGFuY2VkX3RpdGxlPzogc3RyaW5nXG4gIHN1bW1hcnk/OiBzdHJpbmdcbiAga2V5X3BvaW50cz86IHN0cmluZ1tdXG4gIHdoeV9pdF9tYXR0ZXJzPzogc3RyaW5nXG4gIHN0cnVjdHVyZWRfc291cmNlcz86IHtcbiAgICBjaXRhdGlvbnM6IHN0cmluZ1tdXG4gICAgc291cmNlczogQXJyYXk8e1xuICAgICAgdGl0bGU6IHN0cmluZ1xuICAgICAgdXJsOiBzdHJpbmdcbiAgICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nXG4gICAgICBkb21haW4/OiBzdHJpbmdcbiAgICB9PlxuICAgIGdlbmVyYXRlZF9hdDogc3RyaW5nXG4gIH1cbiAgXG4gIHNvdXJjZT86IHN0cmluZ1xuICBhdXRob3I/OiBzdHJpbmdcbiAgcGVycGxleGl0eV9tb2RlbD86IHN0cmluZ1xuICBnZW5lcmF0aW9uX2Nvc3Q/OiBudW1iZXJcbiAgc2VhcmNoX3F1ZXJpZXM/OiBzdHJpbmdbXVxuICBjaXRhdGlvbnM/OiBhbnlcbiAgY3JlYXRlZF9hdD86IHN0cmluZ1xuICB1cGRhdGVkX2F0Pzogc3RyaW5nXG59XG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBlcnBsZXhpdHlOZXdzKGNhdGVnb3J5Pzogc3RyaW5nLCBsaW1pdCA9IDIwKSB7XG4gIHRyeSB7XG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicGVycGxleGl0eV9uZXdzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLmVxKFwiYXJ0aWNsZV9zdGF0dXNcIiwgXCJyZWFkeVwiKVxuICAgICAgLm9yZGVyKFwidXBkYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcblxuICAgIGlmIChjYXRlZ29yeSkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcShcImNhdGVnb3J5XCIsIGNhdGVnb3J5KVxuICAgIH1cblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHF1ZXJ5LmxpbWl0KGxpbWl0KVxuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gXCI0MlAwMVwiIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoXCJkb2VzIG5vdCBleGlzdFwiKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJQZXJwbGV4aXR5IG5ld3MgdGFibGUgZG9lcyBub3QgZXhpc3QuIFBsZWFzZSBydW4gdGhlIGRhdGFiYXNlIHNldHVwLlwiKVxuICAgICAgICByZXR1cm4gW11cbiAgICAgIH1cbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGEgfHwgW11cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgUGVycGxleGl0eSBuZXdzOlwiLCBlcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGVycGxleGl0eU5ld3NCeUNhdGVnb3J5KCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInBlcnBsZXhpdHlfbmV3c1wiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5lcShcImFydGljbGVfc3RhdHVzXCIsIFwicmVhZHlcIilcbiAgICAgIC5vcmRlcihcInVwZGF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSBcIjQyUDAxXCIgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcImRvZXMgbm90IGV4aXN0XCIpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIlBlcnBsZXhpdHkgbmV3cyB0YWJsZSBkb2VzIG5vdCBleGlzdC4gUGxlYXNlIHJ1biB0aGUgZGF0YWJhc2Ugc2V0dXAuXCIpXG4gICAgICAgIHJldHVybiB7fVxuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG5cbiAgICAvLyBHcm91cCBieSBjYXRlZ29yeSAobWF4IDEwIHBlciBjYXRlZ29yeSlcbiAgICBjb25zdCBncm91cGVkTmV3cyA9IChkYXRhIHx8IFtdKS5yZWR1Y2UoKGFjYywgYXJ0aWNsZSkgPT4ge1xuICAgICAgaWYgKCFhY2NbYXJ0aWNsZS5jYXRlZ29yeV0pIHtcbiAgICAgICAgYWNjW2FydGljbGUuY2F0ZWdvcnldID0gW11cbiAgICAgIH1cbiAgICAgIGlmIChhY2NbYXJ0aWNsZS5jYXRlZ29yeV0ubGVuZ3RoIDwgMTApIHtcbiAgICAgICAgYWNjW2FydGljbGUuY2F0ZWdvcnldLnB1c2goYXJ0aWNsZSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2NcbiAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBQZXJwbGV4aXR5TmV3c1tdPilcblxuICAgIHJldHVybiBncm91cGVkTmV3c1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBQZXJwbGV4aXR5IG5ld3MgYnkgY2F0ZWdvcnk6XCIsIGVycm9yKVxuICAgIHJldHVybiB7fVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1BlcnBsZXhpdHlOZXdzVGFibGVTZXR1cCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwZXJwbGV4aXR5X25ld3NcIilcbiAgICAgIC5zZWxlY3QoXCJpZFwiKVxuICAgICAgLmxpbWl0KDEpXG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSBcIjQyUDAxXCIgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhcImRvZXMgbm90IGV4aXN0XCIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgdGhyb3cgZXJyb3JcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJQZXJwbGV4aXR5IG5ld3MgdGFibGUgc2V0dXAgY2hlY2sgZmFpbGVkOlwiLCBlcnJvcilcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiRXJyb3IiLCJzdXBhYmFzZSIsInNhdmVBcnRpY2xlIiwiYXJ0aWNsZSIsImRhdGEiLCJleGlzdGluZyIsImZyb20iLCJzZWxlY3QiLCJlcSIsInVybCIsInNpbmdsZSIsImNvbnNvbGUiLCJsb2ciLCJ0aXRsZSIsIkRhdGUiLCJjcmVhdGVkX2F0IiwidG9Mb2NhbGVTdHJpbmciLCJza2lwcGVkIiwiZXJyb3IiLCJpbnNlcnQiLCJjb250ZW50Iiwic3VtbWFyeSIsImFpX3N1bW1hcnkiLCJzb3VyY2UiLCJhdXRob3IiLCJpbWFnZV91cmwiLCJpbWFnZVVybCIsImNhdGVnb3J5IiwiaXNfYWlfZW5oYW5jZWQiLCJvcmlnaW5hbF9hcnRpY2xlX2lkIiwiZW5oYW5jZW1lbnRfbWV0YWRhdGEiLCJnZXRBcnRpY2xlU3RhdHMiLCJvcmRlciIsImFzY2VuZGluZyIsInN0YXRzIiwidG90YWwiLCJsZW5ndGgiLCJieVNvdXJjZSIsImxhdGVzdCIsIm9sZGVzdCIsImZvckVhY2giLCJnZXRCYWxhbmNlZEFydGljbGVzIiwicGFnZSIsImxpbWl0IiwiZmlsdGVycyIsImdldEFydGljbGVzUmVndWxhciIsInNvdXJjZXMiLCJhcnRpY2xlc1BlclNvdXJjZSIsIk1hdGgiLCJtYXgiLCJmbG9vciIsImV4dHJhQXJ0aWNsZXMiLCJhbGxBcnRpY2xlcyIsImkiLCJzb3VyY2VMaW1pdCIsInF1ZXJ5IiwiaW4iLCJpc0FpRW5oYW5jZWQiLCJ1bmRlZmluZWQiLCJsYW5ndWFnZSIsIm9yIiwic3RhcnRJbmRleCIsImVuZEluZGV4IiwicmFuZ2UiLCJwdXNoIiwic29ydCIsImEiLCJiIiwiZ2V0VGltZSIsInNsaWNlIiwiaGFzRW5yaWNobWVudCIsIm5vdCIsImlzIiwiY29kZSIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsIndhcm4iLCJnZXRBcnRpY2xlcyIsInNlYXJjaEFydGljbGVzIiwiZ2V0QXJ0aWNsZUJ5SWQiLCJpZCIsInNhbXBsZUFydGljbGVzIiwibWFwIiwiZ2V0RW5oYW5jZW1lbnRTdGF0cyIsInJwYyIsImNoZWNrRGF0YWJhc2VTZXR1cCIsInRpbWVvdXRQcm9taXNlIiwiUHJvbWlzZSIsIl8iLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwiZGJQcm9taXNlIiwicmFjZSIsInNhdmVIZWFkbGluZXMiLCJoZWFkbGluZXMiLCJnZXRIZWFkbGluZXMiLCJnZXRIZWFkbGluZXNCeUNhdGVnb3J5IiwiZ3JvdXBlZEhlYWRsaW5lcyIsInJlZHVjZSIsImFjYyIsImhlYWRsaW5lIiwiY2xlYW51cE9sZEhlYWRsaW5lcyIsImRlbGV0ZSIsImx0Iiwibm93IiwidG9JU09TdHJpbmciLCJjaGVja0hlYWRsaW5lc1RhYmxlU2V0dXAiLCJnZXRQZXJwbGV4aXR5TmV3cyIsImdldFBlcnBsZXhpdHlOZXdzQnlDYXRlZ29yeSIsImdyb3VwZWROZXdzIiwiY2hlY2tQZXJwbGV4aXR5TmV3c1RhYmxlU2V0dXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/ws","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/isows"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Farticles%2Froute&page=%2Fapi%2Farticles%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Farticles%2Froute.ts&appDir=%2FUsers%2Fmarkau%2Fpanora8A%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmarkau%2Fpanora8A&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();